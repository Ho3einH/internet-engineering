# internet-engineering
Pamphlet fo internet engineering lesson
### خلاصه فصل سوم: لایه IP در شبکه اینترنت
فصل سوم به بررسی **لایه IP** در شبکه اینترنت می‌پردازد و مفاهیم، ساختار بسته‌ها، آدرس‌دهی، پروتکل‌های مرتبط و نکات کلیدی در زمینه انتقال داده در این لایه را تشریح می‌کند.
---
### مفاهیم کلیدی لایه IP
- **لایه IP (Internet Protocol)** وظیفه هدایت بسته‌های اطلاعاتی از یک شبکه به شبکه دیگر را بر عهده دارد.  
- آدرس‌های MAC به عنوان آدرس‌های فیزیکی دستگاه‌ها در شبکه‌های محلی شناخته می‌شوند که برای انتقال داده بر روی کانال فیزیکی استفاده می‌شوند.  
- بسته IP مستقل از ساختار شبکه است و در قالب یک بسته استاندارد درون فریم داده هر شبکه منتقل می‌شود.  
- مسیریاب‌ها (Router) دستگاه‌هایی با چندین ورودی و خروجی هستند که با توجه به آدرس مقصد بسته‌ها را به مسیر مناسب هدایت می‌کنند.
---
### زیرساخت شبکه و پروتکل IP
- **اینترنت (Network Backbone)** شامل خطوط ارتباطی با پهنای باند بسیار بالا است که امکان انتقال داده‌های سریع و هوشمند را فراهم می‌کند.  
- زیرشبکه (Subnet) به عنوان زیرساخت ارتباطی شبکه‌ها عمل کرده و مدیریت و سازماندهی مسیر یابی بسته‌ها را بر عهده دارد.  
- پروتکل IP وظیفه حمل و تردد بسته‌های اطلاعاتی را بر عهده دارد و بسته‌های داده را از لایه IP به لایه انتقال یا بالعکس ارسال می‌کند.  




---
### قالب و ساختار بسته IP

قالب بسته IP شامل چندین فیلد مهم است که در ادامه شرح داده می‌شود:

| فیلد                  | اندازه (بیت) | توضیح                                                      |
|-----------------------|--------------|------------------------------------------------------------|
| Version               | 4            | مشخص کننده نسخه پروتکل IP (مثلاً نسخه 4 یا 6)              |
| IHL (IP Header Length)| 4            | طول هدر بسته بر مبنای کلمات 32 بیتی (حداقل 5)              |
| Type of Service       | 8            | درخواست سرویس ویژه برای ارسال بسته (اولویت، تأخیر، اطمینان)|
| Total Length          | 16           | طول کل بسته IP (حداکثر 65535 بایت)                         |
| Identification        | 16           | شماره شناسایی داده‌گرام واحد                               |
| Flags (DF, MF)        | 3            | کنترل قطعه قطعه شدن بسته (DF: عدم قطعه قطعه شدن، MF: وجود قطعات بعدی)|
| Fragment Offset       | 13           | ترتیب هر قطعه در داده‌گرام شکسته شده                      |
| Time To Live (TTL)    | 8            | طول عمر بسته قبل از حذف توسط مسیریاب                        |
| Protocol              | 8            | شماره پروتکل لایه بالاتر متقاضی                            |
| Header Checksum       | 16           | کد کشف خطا بر اساس جمع مکمل                               |
| Source Address        | 32           | آدرس IP مبدأ                                               |
| Destination Address   | 32           | آدرس IP مقصد                                              |
| Options (اختیاری)      | تا 40 بایت    | اطلاعات اضافی برای مسیریابی مناسب                           |
| Payload               | *متغیر*      | داده دریافتی از لایه بالاتر                                 |

---

### آدرس‌دهی IP و کلاس‌های آدرس

- آدرس IP شامل 32 بیت است که به صورت چهار عدد دهدهی جدا شده با نقطه نمایش داده می‌شود.  
- آدرس IP به دو بخش اصلی تقسیم می‌شود: **آدرس شبکه (Network ID)** و **آدرس میزبان (Host ID)**.  
- تقسیم‌بندی آدرس‌ها بر اساس کلاس‌های مختلف صورت می‌گیرد:

| کلاس آدرس | محدوده آدرس (دهدهی)       | مشخصه بیت‌های پرارزش  | توضیح                         |
|-----------|-----------------------------|------------------------|------------------------------|
| کلاس A    | 0.0.0.0 تا 127.255.255.255  | بیت اول 0              | آدرس شبکه 7 بیت، میزبان 24 بیت|
| کلاس B    | 128.0.0.0 تا 191.255.255.255| دو بیت اول 10          | آدرس شبکه 14 بیت، میزبان 16 بیت|
| کلاس C    | 192.0.0.0 تا 223.255.255.255| سه بیت اول 110         | آدرس شبکه 21 بیت، میزبان 8 بیت |
| کلاس D    | 224.0.0.0 تا 239.255.255.255| چهار بیت اول 1110      | آدرس‌های چندپخشی (Multicast)  |
| کلاس E    | 240.0.0.0 تا 255.255.255.255| پنج بیت اول 11110      | آدرس‌های رزرو شده (استفاده نشده) |

---

### آدرس‌های خاص و کاربرد آنها

- **0.0.0.0:** آدرسی است که دستگاه‌های میزبان از آن استفاده می‌کنند هنگامی که آدرس IP خود را نمی‌دانند.  
- **255.255.255.255:** آدرس پخش (Broadcast) برای ارسال پیام به تمام دستگاه‌های شبکه محلی.  
- **127.x.x.x:** آدرس بازگشت (Loopback) که برای اشکال‌زدایی نرم‌افزارها مورد استفاده قرار می‌گیرد.  
- آدرس‌هایی با NetID برابر 255 برای ارسال پیام‌های پخش در شبکه‌های راه دور استفاده می‌شوند.

---

### پروتکل‌های مرتبط با لایه IP

#### پروتکل ICMP (Internet Control Message Protocol)

- وظیفه **ارسال پیام‌های کنترلی و خطا** به فرستنده در صورت بروز مشکلات در شبکه را دارد.  
- پیام‌های مختلفی توسط ICMP تعریف شده‌اند که مهم‌ترین آنها عبارتند از:

| نوع پیام                    | شرح                                                        |
|----------------------------|-------------------------------------------------------------|
| Destination Unreachable     | نرسیدن بسته به مقصد به دلایل مختلف مانند عدم تشخیص آدرس    |
| Time Exceeded              | انقضای زمان عمر بسته یا زمان بازسازی قطعات داده‌گرام       |
| Parameter Problem           | وجود مقدار نامعتبر در فیلدهای بسته IP                      |
| Source Quench              | درخواست کاهش نرخ ارسال بسته‌ها از فرستنده                  |
| Redirect                   | اصلاح مسیر هدایت بسته‌ها توسط مسیریاب                     |
| Echo Request / Echo Reply  | بررسی دسترسی‌پذیری میزبان (معروف به دستور ping)           |
| Timestamp Request/Reply    | درخواست و پاسخ زمان برای سنجش تاخیر و زمان‌بندی شبکه       |

#### پروتکل ARP (Address Resolution Protocol)

- برای **تعیین آدرس فیزیکی (MAC) بر اساس آدرس IP** در شبکه محلی استفاده می‌شود.  
- ARP یک پروتکل فراگیر (broadcast) محلی است و بسته‌های آن فقط در همان شبکه محلی ارسال می‌شوند.  
- پیام ARP شامل مواردی مانند نوع سخت‌افزار، نوع پروتکل، طول آدرس‌ها و آدرس‌های منبع و مقصد است.

#### پروتکل RARP (Reverse Address Resolution Protocol)

- در مواقعی که **آدرس فیزیکی دستگاه مشخص است اما آدرس IP آن نامعلوم است**، از RARP استفاده می‌شود.  
- دستگاه، بسته درخواست RARP را به صورت فراگیر ارسال می‌کند و دستگاه‌های پشتیبان RARP پاسخ با آدرس IP مربوطه را ارسال می‌کنند.  
- این پروتکل نیز تنها در محدوده شبکه محلی کاربرد دارد و بسته‌های آن توسط مسیریاب‌ها منتقل نمی‌شوند.

#### پروتکل BootP

- برای **یافتن آدرس IP در شبکه‌های محلی مختلف** استفاده می‌شود، زمانی که RARP پاسخگو نیست.  
- از بسته‌های UDP برای انتقال داده‌ها استفاده می‌کند.  
- BootP قادر است آدرس IP را در شبکه‌های بزرگ‌تر و پیچیده‌تر نسبت به RARP تعیین کند.

#### پروتکل DHCP (Dynamic Host Configuration Protocol)

- به معنی **پروتکل پیکربندی میزبان پویا** است.  
- وظیفه اختصاص خودکار آدرس IP به کامپیوترها در محدوده مشخص شده را بر عهده دارد.  
- علاوه بر تخصیص IP، مدیریت پیکربندی شبکه مانند Subnet Mask، Default Gateway و DNS Server را نیز انجام می‌دهد.  
- DHCP موجب تسهیل مدیریت شبکه‌های بزرگ و پویا می‌شود.

---

### نکات مهم و نتیجه‌گیری

- **لایه IP به عنوان ستون فقرات ارتباطات اینترنت عمل می‌کند و مستقل از ساختار شبکه فیزیکی، بسته‌ها را بین شبکه‌ها منتقل می‌کند.**  
- آدرس‌دهی IP به صورت کلاسیک در پنج کلاس اصلی انجام شده که هر کدام کاربرد و محدوده خاص خود را دارند.  
- پروتکل ICMP ابزار مهمی برای اشکال‌زدایی و مدیریت خطاهای شبکه است.  
- پروتکل‌های ARP و RARP برای تبدیل آدرس‌های IP به آدرس‌های فیزیکی و بالعکس در شبکه‌های محلی کاربرد دارند.  
- BootP و DHCP امکان پیکربندی خودکار و پویا را برای دستگاه‌ها فراهم می‌کنند که در شبکه‌های امروزی حیاتی است.  

---

این فصل یک دید جامع و دقیق نسبت به لایه IP، ساختار بسته‌ها و پروتکل‌های مرتبط فراهم کرده و پایه‌ای برای درک بهتر مدیریت و مسیریابی داده‌ها در شبکه‌های مبتنی بر اینترنت ایجاد می‌کند.
